<main>
    <h1>Mon espace</h1>

    <div class="cart-page-elements">
        <section>
            <h2>Mon panier</h2>

            <ng-container *ngIf="cartPrice == -1">
                <p>Vous n'avez pas de panier</p>
                <button>J'en crée un</button>
            </ng-container>

            <ng-container *ngIf="cartPrice != -1 && cartArticles.length == 0">
                <p>Votre panier est vide</p>
                <a routerLink="">Je le remplis</a>
            </ng-container>

            <ng-container *ngIf="cartArticles.length > 0">
                <ul>
                    <li *ngFor="let article of cartArticles">
                        {{ article.article_name }} x{{ article.cart_quantity }}
                    </li>
                </ul>
                <p>
                    Prix TTC : {{ cartPrice }}&nbsp;€
                </p>
                <button>Je commande</button>
                <button (click)="deleteCart()">Je supprime mon panier</button>
            </ng-container>
            
        </section>

        <section>
            <h2>Mes commandes passées</h2>

            <p *ngIf="invoices.length == 0">Chargement en cours...</p>

            <ul>
                <li *ngFor="let invoice of invoices">
                    <a routerLink="/previous-cart/{{ invoice.cart_id }}">
                        <p>
                            Facture n°{{ invoice.invoice_id }},
                            {{ invoice.num_articles || "aucun" }}
                            article<span *ngIf="(invoice.num_articles || 2) > 1"
                                >s</span
                            >.
                        </p>
                        <p>Crée le {{ formatDate(invoice.created) }}</p>
                    </a>
                </li>
            </ul>
        </section>
    </div>
</main>
